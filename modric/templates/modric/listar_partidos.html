{% extends 'base.html' %}
{% block content %}
    <script>
    $(document).ready(function() {
        $('#tablapartidos').DataTable(
             {
                 pageLength: -1,
                 lengthMenu: [ [10, 25, 50, 100, -1], [10, 25, 50, 100, "Todos"] ],
                 columnDefs: [
                        { "type": "num", "targets": 1 }
                    ]
             }
        );
    } );
    </script>
    
    
    <h1>Mis partidos</h1>
    <p>Estos son todos tus partidos, <i>{{ usuario.username }}</i>.</p>
    <br>
    <H4>Tus partidos de hoy {% now "" %}:</H4>
    {% if partidos_hoy %}
        <table class="table table-hover">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Deporte</th>
                <th>Recinto</th>
              </tr>
            </thead>
            <tbody>
            {% for item in partidos_hoy %}
                <tr {% if item.id not in lista_no_inscritos %}
                            class="bg-warning"
                        {% endif %}
                >
                    <td>
                        <a href="{% url 'modric:detalle_partido' item.id %}">
                        {{ item.fecha|date:"l"|capfirst }}, {{ item.fecha }}</a>
                        {% if item.id not in lista_no_inscritos %}
                            <i>(Eres el creador pero no estás inscrito)</i>
                        {% endif %}
                    </td>
                    <td>{{ item.deporte }}</td>
                    <td>
                        <a href="{% url 'modric:recinto' item.recinto.id %}">{{ item.recinto }}</a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No tienes partidos hoy.</p>
    {% endif %}
    <br>    
    {% if partidos_futuros %}
        <H4>Tus próximos partidos:</H4>
            <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Fecha</th>
                    <th>Deporte</th>
                    <th>Recinto</th>
                  </tr>
                </thead>
                <tbody>
                {% for item in partidos_futuros %}
                <tr {% if item.id not in lista_no_inscritos %}
                            class="bg-warning"
                        {% endif %}
                >
                    <td>
                        <a href="{% url 'modric:detalle_partido' item.id %}">
                        {{ item.fecha|date:"l"|capfirst }}, {{ item.fecha }}</a>
                        {% if item.id not in lista_no_inscritos %}
                            <i>(Eres el creador pero no estás inscrito)</i>
                        {% endif %}
                    </td>
                    <td>{{ item.deporte }}</td>
                    <td>
                        <a href="{% url 'modric:recinto' item.recinto.id %}">{{ item.recinto }}</a>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
    {% else %}
        <p>No tienes partidos previstos</p>
    {% endif %}
    <br>
    {% if partidos_anteriores %}
        <H4>Historial de partidos:</H4>
        <table class="table table-hover">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Deporte</th>
                <th>Recinto</th>
              </tr>
            </thead>
            <tbody>
            {% for item in partidos_anteriores %}
                 <tr>
                    <td>
                        <a href="{% url 'modric:detalle_partido' item.id %}">
                        {{ item.fecha|date:"l"|capfirst }}, {{ item.fecha }}</a>
                    </td>
                    <td>{{ item.deporte }}</td>
                    <td>
                        <a href="{% url 'modric:recinto' item.recinto.id %}">{{ item.recinto }}</a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Aún no tienes partidos disputados.</p>
    {% endif %}
    
    <a href="{% url 'modric:index' %}">Volver</a>
{% endblock %}